(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[722],{2760:function(e,t,s){Promise.resolve().then(s.bind(s,1272))},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},1272:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(7437),n=s(2265),r=s(605),o=s(7648),i=s(9376);function c(){var e,t;let{data:s}=(0,r.useSession)(),c=(0,i.useRouter)(),{id:u}=(0,i.useParams)(),[l,d]=(0,n.useState)(null),[h,m]=(0,n.useState)(!0),[f,x]=(0,n.useState)(null);(0,n.useEffect)(()=>{u&&(async()=>{try{let e=await fetch("/api/posts/".concat(u));if(!e.ok)throw Error("Post not found");let t=await e.json();d(t)}catch(e){x(e.message)}finally{m(!1)}})()},[u]);let p=async()=>{if(l&&window.confirm("정말로 이 게시물을 삭제하시겠습니까?"))try{let e=await fetch("/api/posts/".concat(l.id),{method:"DELETE"});if(!e.ok){let t=await e.json();throw Error(t.message||"게시물 삭제에 실패했습니다.")}c.push("/posts"),c.refresh()}catch(e){x(e.message)}};if(h)return(0,a.jsx)("div",{className:"container mx-auto p-4",children:"로딩 중..."});if(f)return(0,a.jsx)("div",{className:"container mx-auto p-4 text-red-500",children:f});if(!l)return(0,a.jsx)("div",{className:"container mx-auto p-4",children:"게시물을 찾을 수 없습니다."});let w=(null==s?void 0:null===(e=s.user)||void 0===e?void 0:e.id)===l.authorId.toString(),v=(null==s?void 0:null===(t=s.user)||void 0===t?void 0:t.role)==="ADMIN";return(0,a.jsx)("div",{className:"container mx-auto p-4",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-4",children:l.title}),(0,a.jsxs)("p",{className:"text-gray-600 mb-2",children:["작성자: ",l.author.name]}),(0,a.jsxs)("p",{className:"text-gray-500 text-sm mb-6",children:["작성일: ",new Date(l.createdAt).toLocaleDateString()]}),(0,a.jsx)("div",{className:"prose max-w-none whitespace-pre-wrap",children:l.content}),(w||v)&&(0,a.jsxs)("div",{className:"mt-6 flex space-x-4",children:[(0,a.jsx)(o.default,{href:"/posts/".concat(l.id,"/edit"),className:"bg-yellow-500 text-white px-4 py-2 rounded",children:"수정"}),(0,a.jsx)("button",{onClick:p,className:"bg-red-500 text-white px-4 py-2 rounded",children:"삭제"})]})]})})}}},function(e){e.O(0,[972,39,971,117,744],function(){return e(e.s=2760)}),_N_E=e.O()}]);