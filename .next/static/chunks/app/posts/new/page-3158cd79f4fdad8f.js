(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[106,136],{7801:function(e,t,n){Promise.resolve().then(n.bind(n,1995))},9376:function(e,t,n){"use strict";var s=n(5475);n.o(s,"useParams")&&n.d(t,{useParams:function(){return s.useParams}}),n.o(s,"useRouter")&&n.d(t,{useRouter:function(){return s.useRouter}})},1995:function(e,t,n){"use strict";n.d(t,{default:function(){return l}});var s=n(7437),a=n(2265),o=n(9376);function l(e){let{initialData:t,postId:n}=e,[l,u]=(0,a.useState)((null==t?void 0:t.title)||""),[r,i]=(0,a.useState)((null==t?void 0:t.content)||""),[c,d]=(0,a.useState)(!1),[h,f]=(0,a.useState)(null),m=(0,o.useRouter)(),b=async e=>{e.preventDefault(),d(!0),f(null);try{let e=await fetch(n?"/api/posts/".concat(n):"/api/posts",{method:n?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:l,content:r})});if(!e.ok){let t=await e.json();throw Error(t.message||"Something went wrong")}m.push("/posts"),m.refresh()}catch(e){f(e.message)}finally{d(!1)}};return(0,s.jsxs)("form",{onSubmit:b,className:"bg-white p-6 rounded-lg shadow-md",children:[h&&(0,s.jsx)("p",{className:"text-red-500 mb-4",children:h}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"title",className:"block text-gray-700 text-sm font-bold mb-2",children:"제목:"}),(0,s.jsx)("input",{type:"text",id:"title",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",value:l,onChange:e=>u(e.target.value),required:!0})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{htmlFor:"content",className:"block text-gray-700 text-sm font-bold mb-2",children:"내용:"}),(0,s.jsx)("textarea",{id:"content",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-32",value:r,onChange:e=>i(e.target.value),required:!0})]}),(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsx)("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",disabled:c,children:c?"저장 중...":n?"게시물 수정":"게시물 생성"})})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=7801)}),_N_E=e.O()}]);